import{j as e,L as o,b,r as l,c as g,a0 as v,x as f,P as N,A as _,o as S,B}from"./vendor-wMn6iGPg.js";import{Y as C,u,Z as h,_ as P,$ as q,d as y,f as D,h as w,T as E,n as O,a0 as I,a as T,a1 as L,a2 as k}from"./index-8i8i33M2.js";/* empty css                    */import{D as z}from"./DeleteIcon-6Ouv8ePB.js";import{a as A}from"./plans-P6kHv7ap.js";import{D as R}from"./DeleteBussinessModal-y_Rtb970.js";function F(t){const s={fontSize:"3rem",lineHeight:"1",fontWeight:"600"};return e.jsxs("div",{style:{...C,padding:"20px 20px 40px 20px"},children:[e.jsxs("div",{style:{display:"flex",gap:"10px"},className:"cambioDePaqueteDiv",children:[e.jsx("h2",{style:s,className:"cambioDePaqueteTitle",children:"Paquete "}),e.jsxs("span",{className:t.paquete=="premium"?"category-type-text-color-premium":t.paquete=="basico"?"category-type-text-color-basico":"category-type-text-color-gratis",style:{...s,textTransform:"uppercase"},children:[t.paquete,"."]})]}),e.jsx("div",{style:{gap:"10px",display:"flex"},children:e.jsx(o,{to:"/plans","aria-label":"negocio",children:e.jsx(b,{children:"Cambiar de paquete"})})})]})}function H(t){const s=u(i=>i.setBussiness);return l.useState(0),e.jsxs(g,{className:"py-4 tarjeta-negocio-card-vip",style:t.index===t.isSelected?{border:"2px solid #5E17EB",...h}:{...h},children:[e.jsxs(v,{className:"pb-0 pt-2 px-4 flex-col items-start",children:[e.jsx("p",{className:"text-tiny uppercase font-bold",children:t.localizacion}),e.jsx("h2",{className:"font-bold text-large mb-2 titulo-card-negocio-panntalla-principal",style:{},children:t.nombre}),e.jsx("span",{className:"text-danger",onClick:()=>{s(t.bussiness),t.onOpenChange()},style:{position:"absolute",top:"10px",right:"10px"},children:e.jsx(z,{})})]}),e.jsx(f,{style:P,onClick:()=>{s(t.bussiness),t.setIsSelected(t.index)},className:"overflow-visible py-2 card-body-seccion",children:e.jsx(N.LazyLoadImage,{alt:t.nombre,src:t.imagen,effect:"blur",style:{...q,objectFit:"cover"},placeholderSrc:t.imagen,useIntersectionObserver:!0,className:"lazyload",threshold:100,delayTime:300,delayMethod:"throttle"})})]})}function U({userId:t,...s}){const[i,m]=l.useState(0),c=u(a=>a.setBussiness),x={width:"100%",height:"100px",borderRadius:"10px",border:"2px dashed #cacaca",display:"grid",placeItems:"center"},[j,d]=l.useState(0),r=l.useRef([]),n=async()=>{const a=await I(t);r.current=a,c(a&&a.length>0?a[0]:null),d(p=>p+1)};return l.useEffect(()=>{n()},[t]),y.channel("custom-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"bussiness",filter:`owner=eq.${t}`},a=>{n()}).subscribe(),e.jsx(e.Fragment,{children:e.jsx("div",{style:D,children:e.jsxs("section",{className:"section px-6",style:w,children:[e.jsx(E,{title:s.title}),e.jsx("div",{style:{...O,marginBottom:"40px"},children:r.current.map((a,p)=>e.jsx(H,{index:p,isSelected:i,setIsSelected:m,id:a.id,imagen:a.perfil_pic,localizacion:a.province,gps_location:a.gps_location,nombre:a.name,bussiness:a,onOpenChange:s.onOpenChange},a.id))}),e.jsx("div",{style:{...x,marginBottom:"40px"},onClick:()=>{if(r.current.length>=5){_.error("Ha llegado al lÃ­mite de negocios que puede tener con su plan");return}c(null)},children:"Agregar Negocio"}),e.jsx(S,{richColors:!0,theme:"dark",duration:3e3,position:"bottom-center"})]})})})}function G({children:t}){const s=T(n=>n.user),i=u(n=>n.bussiness),m=u(n=>n.setBussiness),c=L(n=>n.setPlan),{isOpen:x,onOpen:j,onOpenChange:d}=B();l.useEffect(()=>{const n=async()=>{const a=await A(s.plan);c(a)};s&&s.plan&&n()},[s]);const r={width:"100%",maxWidth:"900px",display:"grid",gridTemplateColumns:"repeat(1,1fr)"};return y.channel("custom-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"bussiness"},async n=>{try{if(s===null)return;const a=await k(s.id);m(a)}catch(a){console.error("Error fetching business:",a)}}).subscribe(),e.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:e.jsxs("div",{style:r,children:[e.jsx(F,{paquete:s==null?void 0:s.plan}),(s==null?void 0:s.plan)=="premium"?e.jsx(U,{userId:s.id,onOpenChange:d}):null,e.jsx("div",{children:i!=null?e.jsxs("section",{className:"flex justify-between",style:{margin:"10px"},children:[e.jsx(o,{to:"/administrador-negocio/perfil",children:"Perfil"}),e.jsx(o,{to:"/administrador-negocio/horarios",children:"Horario"}),(s==null?void 0:s.plan)==="premium"&&e.jsx(o,{to:"/administrador-negocio/eventos",children:"Eventos"}),(s==null?void 0:s.plan)==="premium"&&e.jsx(o,{to:"/administrador-negocio/novedades",children:"Novedades"}),e.jsx(o,{to:"/administrador-negocio/productos",children:"Productos"})]}):e.jsx("section",{className:"flex justify-between mx-8",children:e.jsx(o,{to:"/administrador-negocio/perfil",children:"Perfil"})})}),e.jsx(g,{children:e.jsx(f,{children:t})}),e.jsx(R,{bussinessToDelete:i,isOpen:x,onOpenChange:d,merchant:!0})]})})}export{G as default};
