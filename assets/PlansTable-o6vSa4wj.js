import{R as l,j as e,p as O,q as V,b as m,v as G,w as v,i as n,B as q,C as _,$ as u,F as I,H as K,I as B,J as H,K as J,M as P,o as $,m as y,e as C,f as w,g as N,h as S,A as Q}from"./vendor-wMn6iGPg.js";import{E as U}from"./EditIcon-jeAxN2UI.js";import{D as W}from"./DeleteIcon-6Ouv8ePB.js";import{d as X,u as Y}from"./plans-P6kHv7ap.js";import"./index-8i8i33M2.js";function p({status:t,onChange:r}){const[i,o]=l.useState(new Set([t])),a=l.useMemo(()=>Array.from(i).join(", ").replaceAll("_"," "),[i]),c=d=>{if(o(d),r){const h=Array.from(d)[0];r(h)}};return e.jsxs(O,{className:"ml-2",children:[e.jsx(V,{children:e.jsx(m,{variant:"shadow",color:"secondary",className:"capitalize text-white w-4",children:a==="true"?"Si":"No"})}),e.jsxs(G,{color:"secondary",variant:"shadow",disallowEmptySelection:!0,selectionMode:"single",selectedKeys:i,onSelectionChange:c,children:[e.jsx(v,{children:"Si"},"true"),e.jsx(v,{children:"No"},"false")]})]})}function Z({editedPlan:t,setEditedPlan:r,selectedPlan:i}){const o={display:"flex",flexDirection:"row",gap:"10px"};return e.jsx("div",{children:e.jsxs("form",{action:"submit",children:[e.jsx(n,{autoFocus:!0,label:"Nombre",placeholder:"Escribe el nuevo nombre",variant:"bordered",type:"text",onChange:a=>r({...t,name:a.target.value})}),e.jsx("br",{}),e.jsx(n,{autoFocus:!0,label:"Precio",placeholder:"Escribe el precio",variant:"bordered",type:"number",onChange:a=>r({...t,price:a.target.value})}),e.jsx("br",{}),e.jsxs("div",{style:o,children:[e.jsx(n,{autoFocus:!0,label:"Cant. Negocios",placeholder:"Escribe la cantidad",variant:"bordered",type:"number",onChange:a=>r({...t,bussiness_num:a.target.value})}),e.jsx(n,{autoFocus:!0,label:"Cantidad de Productos",placeholder:"Escribe la cantidad",variant:"bordered",type:"number",onChange:a=>r({...t,product_num:a.target.value})})]}),e.jsx("br",{}),e.jsxs("div",{style:o,children:[e.jsx(n,{autoFocus:!0,label:"Redes sociales",placeholder:"Escribe la cantidad",variant:"bordered",type:"number",onChange:a=>r({...t,social_media:a.target.value})}),e.jsx("br",{}),e.jsx(n,{label:"Teléfono",placeholder:"Escribe la cantidad",type:"number",variant:"bordered",onChange:a=>r({...t,phone_number:a.target.value})})]}),e.jsx("br",{}),e.jsxs("div",{style:o,children:[e.jsx(n,{label:"Email",placeholder:"Escribe la cantidad de emails",type:"number",variant:"bordered",onChange:a=>r({...t,email:a.target.value})}),e.jsx("br",{}),e.jsx(n,{label:"Localización GPS",placeholder:"Escribe la cantidad de localizaciones GPS",type:"number",variant:"bordered",onChange:a=>r({...t,gps_location:a.target.value})})]}),e.jsx("br",{}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px"},children:[e.jsxs("div",{style:{width:"25%"},children:[e.jsx("span",{style:{marginLeft:"10px"},className:"w-[30%] text-small text-default-400",children:"Domicilio"}),e.jsx("br",{}),e.jsx(p,{status:i.delivery,onChange:a=>{r({...t,event_post:a==="true"})}})]}),e.jsxs("div",{style:{width:"25%"},children:[e.jsx("span",{style:{marginLeft:"12px"},className:"w-[30%] text-small text-default-400",children:"Eventos"}),e.jsx("br",{}),e.jsx(p,{isActive:i.event_post,onChange:a=>{r({...t,event_post:a==="active"})}})]}),e.jsxs("div",{style:{width:"25%"},children:[e.jsx("span",{style:{marginLeft:"12px"},className:"w-[30%] text-small text-default-400",children:"Reservas"}),e.jsx("br",{}),e.jsx(p,{isActive:i.booking,onChange:a=>{r({...t,booking:a==="active"})}})]}),e.jsxs("div",{style:{width:"25%"},children:[e.jsx("span",{style:{marginLeft:"12px"},className:"w-[30%] text-small text-default-400",children:"Priorizar"}),e.jsx("br",{}),e.jsx(p,{isActive:i.priorize,onChange:a=>{r({...t,priorize:a==="active"})}})]})]})]})})}function ie({plans:t}){const[r,i]=l.useState(""),[o,a]=l.useState(new Set([])),[c,d]=l.useState(null),h=s=>{d(s),b({...j,id:s.id})},z=()=>{d(null)},k=[{name:"Nombre",uid:"name"},{name:"Precio",uid:"price"},{name:"Cantidad de negocios",uid:"bussiness_num"},{name:"Cant. Productos",uid:"product_num"},{name:"Domicilio",uid:"delivery"},{name:"Redes Sociales",uid:"social_media"},{name:"Teléfono",uid:"phone_number"},{name:"Email",uid:"email"},{name:"Localización GPS",uid:"gps_location"},{name:"Eventos",uid:"event_post"},{name:"Reserva",uid:"booking"},{name:"Prioridad",uid:"priorize"},{name:"Acciones",uid:"actions"}],[j,b]=l.useState({id:"",name:"",price:"",bussiness_num:"",front_pic:"",perfil_pic:"",product_num:"",delivery:"",open_hour:"",close_hour:"",social_media:"",phone_number:"",email:"",gps_location:"",event_post:"",booking:"",priorize:""}),E=async()=>{const s=await Y(j);s!==null&&Q.error(s.message),b({id:"",name:"",price:"",bussiness_num:"",front_pic:"",perfil_pic:"",product_num:"",delivery:"",open_hour:"",close_hour:"",social_media:"",phone_number:"",email:"",gps_location:"",event_post:"",booking:"",priorize:""})},{isOpen:g,onOpen:D,onClose:F}=q(),[f,A]=l.useState(null),R=async s=>{A(s),D()},L=l.useCallback((s,x)=>{const T=s[x];switch(x){case"name":return e.jsx(u,{className:"capitalize",color:s.name==="Gratis"?"success":s.name==="Básico"?"primary":"danger",size:"sm",variant:"flat",children:s.name});case"delivery":return e.jsx(u,{className:"capitalize",color:s.delivery===!0?"success":"danger",size:"sm",variant:"flat",children:s.delivery===!0?"Si":"No"});case"event_post":return e.jsx(u,{className:"capitalize",color:s.event_post===!0?"success":"danger",size:"sm",variant:"flat",children:s.event_post===!0?"Si":"No"});case"booking":return e.jsx(u,{className:"capitalize",color:s.booking===!0?"success":"danger",size:"sm",variant:"flat",children:s.booking===!0?"Si":"No"});case"priorize":return e.jsx(u,{className:"capitalize",color:s.priorize===!0?"success":"danger",size:"sm",variant:"flat",children:s.priorize===!0?"Si":"No"});case"actions":return e.jsxs("div",{className:"relative flex items-center  gap-2",children:[e.jsx(_,{content:"Edit user",children:e.jsx("span",{className:"text-lg text-default-500 cursor-pointer active:opacity-50",onClick:()=>h(s),children:e.jsx(U,{})})}),e.jsx(_,{color:"danger",content:"Delete user",children:e.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>R(s),children:e.jsx(W,{})})})]});default:return T}},[]),M=l.useMemo(()=>e.jsx("div",{className:"flex flex-col gap-4 justify-center",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-default-400 text-small",children:["Total: ",t.length," planes"]}),e.jsx("label",{className:"flex items-center text-default-400 text-small",style:{marginRight:"10px"}})]})}),[r,t.length]);return e.jsxs("div",{style:{width:"90%"},children:[e.jsxs(I,{"aria-label":"Plans table",isHeaderSticky:!0,bottomContentPlacement:"outside",classNames:{wrapper:"max-h-[382px]"},selectedKeys:o,topContent:M,topContentPlacement:"outside",children:[e.jsx(K,{columns:k,children:s=>e.jsx(B,{align:s.uid==="actions"?"center":"start",allowsSorting:s.sortable,children:s.name},s.uid)}),e.jsx(H,{emptyContent:"No plans found",items:t,children:s=>e.jsx(J,{children:x=>e.jsx(P,{align:"center",children:L(s,x)})},s.id)})]}),e.jsx($,{duration:3e3,richColors:!0,position:"bottom-center"}),g&&e.jsx(y,{isOpen:g,onOpenChange:F,children:e.jsx(C,{children:s=>e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:["Eliminar a ",f.name]}),e.jsxs(N,{children:["¿Estás seguro de que quieres eliminar al usuario"," ",f.name,"?"]}),e.jsxs(S,{children:[e.jsx(m,{color:"danger",variant:"flat",onPress:s,children:"Cancelar"}),e.jsx(m,{color:"primary",onPress:async()=>{await X(f.id),s()},children:"Eliminar"})]})]})})}),c&&e.jsx(y,{backdrop:"blur",isOpen:!!c,onOpenChange:z,placement:"top-center",children:e.jsx(C,{children:s=>e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:"flex flex-col gap-1",children:["Editar plan: ",c.name]}),e.jsx(N,{children:e.jsx(Z,{editedPlan:j,selectedPlan:c,setEditedPlan:b})}),e.jsxs(S,{children:[e.jsx(m,{color:"danger",variant:"flat",onPress:s,children:"Cerrar"}),e.jsx(m,{className:"text-white",color:"success",onPress:()=>{E(),s()},children:"Editar"})]})]})})})]})}export{ie as default};
