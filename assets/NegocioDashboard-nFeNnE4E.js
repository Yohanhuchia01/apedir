import{j as e,R as f,B as X,i as x,b as h,m as N,e as S,f as P,g as O,z as V,h as R,r as p,o as B,a as E,A as I}from"./vendor-TeGnUX-f.js";import{a as D,W as q,T as F}from"./Telefono-69P38AWn.js";import H from"./TextAreaDescripcion-jSSV2BRI.js";import M from"./ImagenUploadButton-5EPkLf08.js";import{I as $,a as U}from"./InputPhoneNumber-da_VV8v5.js";import G from"./InputLocation-UP6SU-8P.js";import{a as Q,u as L,a1 as Z,i as J,n as K,b as Y,a2 as A,p as v,q as y,ak as ee,al as te}from"./index-IetW687g.js";import{c as ne,a as C}from"./index.esm-O8bzDnqW.js";import{L as re}from"./Loader-XWUzDvSh.js";import se from"./InputTitle-Fzdtvff-.js";import{Q as ae}from"./QRCodeLogo--tXvbi8I.js";import{S as ie}from"./SelectCategory-_KIUwvc3.js";import"./image-alM4RakH.js";/* empty css              */import"./search-Z-5xCiDt.js";function T(t){return e.jsx(e.Fragment,{children:e.jsxs("svg",{width:t.w,height:t.h,viewBox:"0 0 24 24",fill:t.color,xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M10.75 2.44995C11.45 1.85995 12.58 1.85995 13.26 2.44995L14.84 3.79995C15.14 4.04995 15.71 4.25995 16.11 4.25995H17.81C18.87 4.25995 19.74 5.12995 19.74 6.18995V7.88995C19.74 8.28995 19.95 8.84995 20.2 9.14995L21.55 10.7299C22.14 11.4299 22.14 12.5599 21.55 13.2399L20.2 14.8199C19.95 15.1199 19.74 15.6799 19.74 16.0799V17.7799C19.74 18.8399 18.87 19.7099 17.81 19.7099H16.11C15.71 19.7099 15.15 19.9199 14.85 20.1699L13.27 21.5199C12.57 22.1099 11.44 22.1099 10.76 21.5199L9.18001 20.1699C8.88001 19.9199 8.31 19.7099 7.92 19.7099H6.17C5.11 19.7099 4.24 18.8399 4.24 17.7799V16.0699C4.24 15.6799 4.04 15.1099 3.79 14.8199L2.44 13.2299C1.86 12.5399 1.86 11.4199 2.44 10.7299L3.79 9.13995C4.04 8.83995 4.24 8.27995 4.24 7.88995V6.19995C4.24 5.13995 5.11 4.26995 6.17 4.26995H7.9C8.3 4.26995 8.86 4.05995 9.16 3.80995L10.75 2.44995Z",stroke:"#292D32",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 8.13V12.96",stroke:"#292D32",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M11.9945 16H12.0035",stroke:"#292D32",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})}const oe="/apedir/assets/faceApedir-h-WolphP.png";function le({value:t,setValue:n}){const[i,s]=f.useState(0),{isOpen:c,onOpen:l,onOpenChange:o}=X();return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(x,{type:"url",label:"Facebook",placeholder:"Nombre de tu usuario en facebook",variant:"bordered",labelPlacement:"outside",startContent:e.jsx("div",{className:"pointer-events-none flex items-center",children:e.jsx("span",{className:"text-default-400 text-small"})}),value:t.current.facebook!==null&&t.current.facebook!==void 0?t.current.facebook:"",onChange:u=>{t.current={...t.current,facebook:u.target.value},s(j=>j+1)}}),e.jsxs(h,{onPress:l,style:{marginTop:"30px",width:"50px",maxWidth:"50px",minWidth:"50px",padding:"0px",background:"transparent"},children:[" ",e.jsx(T,{w:"40px",color:"transparent"})]}),e.jsx(N,{isOpen:c,onOpenChange:o,scrollBehavior:"inside",children:e.jsx(S,{children:u=>e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"flex flex-col gap-1",children:"Pasos para introducir cuenta de Facebook"}),e.jsxs(O,{children:[e.jsx("p",{children:"Para agregar a tu negocio un link con la dirección de tu cuenta de facebook lo unico que debes hacer es insertar el nombre de tu usuario"}),e.jsx("p",{children:"A continuación se muestra un ejemplo de la ubicación del usuario de facebook:"}),e.jsx(V,{src:oe})]}),e.jsx(R,{children:e.jsx(h,{color:"danger",variant:"light",onPress:u,children:"Close"})})]})})})]})}const ce="/apedir/assets/faceInstagram-nz20r44o.png";function ue({value:t}){const[n,i]=f.useState(0),{isOpen:s,onOpen:c,onOpenChange:l}=X();return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(x,{type:"url",label:"Instagram",placeholder:"Nombre de tu usuario en Instagram sin @",variant:"bordered",labelPlacement:"outside",startContent:e.jsx("div",{className:"pointer-events-none flex items-center",children:e.jsx("span",{className:"text-default-400 text-small"})}),value:t.current.instagram!==void 0&&t.current.instagram!==null?t.current.instagram:"",onChange:o=>{t.current={...t.current,instagram:o.target.value},i(u=>u+1)}}),e.jsxs(h,{onPress:c,style:{marginTop:"30px",width:"50px",maxWidth:"50px",minWidth:"50px",padding:"0px",background:"transparent"},children:[" ",e.jsx(T,{w:"40px",color:"transparent"})]}),e.jsx(N,{isOpen:s,onOpenChange:l,scrollBehavior:"inside",children:e.jsx(S,{children:o=>e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"flex flex-col gap-1",children:"Guía para insertar perfil de Instagram"}),e.jsxs(O,{children:[e.jsx("p",{children:"Para agregar a tu negocio un link con la dirección de tu cuenta de instagram lo unico que debes hacer es insertar el nombre de tu usuario"}),e.jsx("p",{children:"A continuación se muestra un ejemplo de la ubicación del usuario de instagram:"}),e.jsx(V,{src:ce})]}),e.jsx(R,{children:e.jsx(h,{color:"danger",variant:"light",onPress:o,children:"Close"})})]})})})]})}function de({value:t,setValue:n}){const[i,s]=f.useState(0),c=l=>{const o=l.target.value;/^\d+$/.test(o)&&(t.current={...t.current,telegram_link:o},s(u=>u+1))};return e.jsx(x,{type:"tel",label:"Link de Telegram",variant:"bordered",placeholder:"+53 XXXXXXXX",labelPlacement:"outside",value:t.current.telegram_link,endContent:e.jsx(D,{w:"20px"}),onChange:c})}function pe({value:t,setValue:n}){const[i,s]=f.useState(0),c=l=>{const o=l.target.value;/^\d+$/.test(o)&&(t.current={...t.current,whatsapp:o},s(u=>u+1))};return e.jsx(x,{type:"tel",label:"Número de Whatsapp",variant:"bordered",placeholder:"+53 XXXXXXXX",labelPlacement:"outside",value:t.current.whatsapp,endContent:e.jsx(q,{w:"20px"}),onChange:c})}function fe({value:t}){const[n,i]=f.useState(0),s=c=>{const l=c.target.value;/^\d+$/.test(l)&&(t.current={...t.current,local_phone:l},i(o=>o+1))};return e.jsx(x,{type:"tel",label:"Telefono del Local",variant:"bordered",placeholder:"22 XXXXXX",labelPlacement:"outside",value:t.current.local_phone,endContent:e.jsx(F,{w:"20px"}),onChange:s})}const me=ne().shape({name:C().required("El nombre del negocio es requerido"),description:C().required("La descripción del negocio es requerida"),email:C().email("El email tiene un formato incorrecto.")});function he(t,n){if(Object.is(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(const[s,c]of t)if(!Object.is(c,n.get(s)))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(const s of t)if(!n.has(s))return!1;return!0}const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!1;for(let s=0;s<i.length;s++)if(!Object.prototype.hasOwnProperty.call(n,i[s])||!Object.is(t[i[s]],n[i[s]]))return!1;return!0}const{useRef:xe}=f;function ge(t){const n=xe();return i=>{const s=t(i);return he(n.current,s)?n.current:n.current=s}}function Ve(){const t=Q(a=>a.user),n=L(ge(a=>a.bussiness)),i=L(a=>a.setBussiness),s=Z(a=>a.plan),[c,l]=p.useState(0),[o,u]=p.useState(!1),j=J(a=>a.category),k=async()=>{try{if(t===null)return;if(n===null){const a=await A(t.id);i(a)}}catch(a){console.error("Error fetching business:",a)}};p.useEffect(()=>()=>{n===null&&k()},[t]),p.useEffect(()=>{if(n){const a={..._};for(let d in a)a[d]=n[d]!==null&&n[d]!==void 0?n[d]:"";r.current=a,l(d=>d+1)}},[n]);const[g,w]=p.useState({front_pic:"",perfil_pic:"",gps_location:""}),_={id:"",owner:"",name:"",privileges:s==="gratis"?1:s==="basico"?2:3,perfil_pic:"",front_pic:"",description:"",address:"",province:"Santiago de Cuba",category:"",gps_location:"",email:"",phone_number:"",whatsapp:"",telegram_link:"",local_phone:"",facebook:"",instagram:"",threads:"",linkedin:"",youtube:"",twitter:"",delivery:!1},r=p.useRef(n??_);p.useEffect(()=>{n===null&&(r.current=_),l(a=>a+1)},[n]);const W=async()=>{try{await me.validate(r.current,{strict:!0})}catch(b){I.error(b.message);return}r.current={...r.current,category:j},u(!0);let a="";r.current.front_pic!==null&&r.current.front_pic!==""&&r.current.front_pic instanceof Blob&&(await v(r.current.id,"bussiness_front"),a=await y(r.current.front_pic,g.front_pic,"bussiness_front"),a=a!==null?a.path:"");let d="";r.current.perfil_pic!==null&&r.current.perfil_pic!==""&&r.current.perfil_pic instanceof Blob&&(await v(r.current.id,"perfil_pic","bussiness_perfil"),d=await y(r.current.perfil_pic,g.perfil_pic,"bussiness_perfil"),d=d!==null?d.path:"");let m="";r.current.gps_location!==null&&r.current.gps_location!==""&&r.current.gps_location instanceof Blob&&(await v(r.current.id,"bussiness_location"),m=await y(r.current.gps_location,g.gps_location,"bussiness_location"),m=m!==null?m.path:"");const z={...r.current,owner:t.id,front_pic:a,perfil_pic:d,gps_location:m};if(await ee(z),n){let b={message:`El negocio ${r.current.name} se ha actualizado.`,bussiness:n.id,addressee:null,bussiness_link:n.value_url};te(b)}u(!1),I.success("Actualización exitosa"),k(),setTimeout(()=>{window.location.reload()},3e3)};return e.jsxs("div",{children:[e.jsx(B,{richColors:!0,theme:"dark",position:"bottom-center",duration:3e3}),e.jsx(se,{value:r}),e.jsx(M,{value:r,imageName:g,setImageName:w}),e.jsx("div",{style:{marginBottom:"20px",width:"100%",display:"grid",placeItems:"center"},children:e.jsx(ae,{url:n==null?void 0:n.value_url,imagen:n==null?void 0:n.perfil_pic,negocio:"si"})}),e.jsx(H,{value:r,maxChars:s==null?void 0:s.description}),e.jsx(E,{isSelected:r.current.delivery,onValueChange:()=>{r.current={...r.current,delivery:!r.current.delivery},l(a=>a+1)},children:"Delivery (Márquelo si hace delivery)"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ie,{value:r}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(G,{value:r,setImageName:w}),e.jsxs("div",{style:K,className:"mt-2 mb-2",children:[e.jsx($,{value:r}),e.jsx(U,{value:r}),e.jsx(pe,{value:r}),e.jsx(de,{value:r}),e.jsx(fe,{value:r}),e.jsx(le,{value:r}),e.jsx(ue,{value:r})]}),o&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(re,{text:"Espera mientras se realiza la actualización."})}),e.jsx(h,{color:"secondary",className:"text-white mt-2",style:Y,onClick:()=>{r.current={...r.current,owner:t.id},W()},children:"Agregar Negocio"})]})}export{Ve as default};
