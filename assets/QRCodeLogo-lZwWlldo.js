import{r as d,j as t,Q as i,b as f}from"./vendor-wMn6iGPg.js";const x="/assets/LogoBlancoApp-9SWkepRZ.png",E=n=>{const[m,g]=d.useState(!1);d.useState(0);const s=d.useRef(new Image);d.useEffect(()=>{const e=s.current;e.crossOrigin="anonymous",e.src=n!=null&&n.imagen?n.imagen:x;const o=()=>{console.log("Imagen cargada correctamente."),g(!0)},a=r=>{console.error("Error al cargar la imagen:",r)};return e.addEventListener("load",o),e.addEventListener("error",a),()=>{e.removeEventListener("load",o),e.removeEventListener("error",a)}},[n==null?void 0:n.imagen]);const u=n.negocio==="si"?`https://apedir.pages.dev/lugar/${n.url}`:"https://apedir.pages.dev/",h=async()=>{var o;const e=(o=document.getElementById("myqrcode"))==null?void 0:o.querySelector("canvas");if(e){const a=document.createElement("canvas");a.width=e.width,a.height=e.height;const r=a.getContext("2d"),l=s.current;l.complete?console.log("Imagen completa antes de dibujar en el canvas."):console.log("Imagen aún no está completa antes de dibujar en el canvas."),r.drawImage(l,0,0,e.width,e.height),r.drawImage(e,0,0);const v=a.toDataURL(),c=document.createElement("a");c.download="QRCode.png",c.href=v,document.body.appendChild(c),c.click(),document.body.removeChild(c)}};return t.jsx("div",{id:"myqrcode",children:n.url?t.jsxs(t.Fragment,{children:[t.jsx(i,{value:u,bgColor:"#fff",errorLevel:"H",style:{marginBottom:16},icon:m&&s.current}),t.jsx(f,{type:"primary",onClick:h,children:"Download QR Code"})]}):t.jsx(t.Fragment,{children:t.jsx(i,{value:"https://apedir.pages.dev/",status:"loading"})})})},R=E;export{R as Q};
