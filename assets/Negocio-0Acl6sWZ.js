import{r as e,j as s,V as R,W as I,X as N,Y as O,Z as T,L as k,$ as z,_ as h}from"./vendor-TeGnUX-f.js";import{H as D,J as A,a as F,K as x,M as B,O as U,Q as W,R as H,S as M,U as J}from"./index-IetW687g.js";import{g as K}from"./categories-z_w9HlUf.js";function Q(){const i=e.useRef(null),u=e.useCallback(n=>{i.current=n},[]),t=e.useCallback((n,d)=>{i.current&&i.current({...d,origin:{y:.7},particleCount:Math.floor(200*n)})},[]);e.useEffect(()=>p(),[]);const p=e.useCallback(()=>{t(.25,{spread:26,startVelocity:55}),t(.2,{spread:60}),t(.35,{spread:100,decay:.91,scalar:.8}),t(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),t(.1,{spread:120,startVelocity:45})},[t]);return s.jsx(R,{refConfetti:u,style:{position:"absolute",pointerEvents:"none",width:"100%",height:"100vh",top:"0px !important",zIndex:"100"}})}function S(i){const[u,t]=e.useState(!1),p=async f=>{try{await D(f,i.user,i.bussiness),t(!0)}catch(g){console.error("Error adding stars:",g)}},n={itemShapes:N,activeFillColor:"#f59e0b",inactiveFillColor:"gray"},d=i.w;return s.jsxs("section",{className:"flex justify-between items-center",style:{position:"relative"},children:[s.jsx(I,{style:{maxWidth:d},value:i.rate,onChange:f=>{const g=f;i.setRate(g),p(g).then(()=>{})},...i.readOnly?{readOnly:!0}:{},itemStyles:n}),u&&s.jsx(Q,{}),i.rate>0&&s.jsx("p",{style:{fontSize:"1em",marginLeft:"5px"},children:parseFloat(i.rate).toFixed(1)})]})}const X=e.lazy(()=>h(()=>import("./FooterNegocio-Al_cBZCj.js"),__vite__mapDeps([0,1,2,3,4]))),Y=e.lazy(()=>h(()=>import("./Promo-AVZZRvdU.js"),__vite__mapDeps([5,1,2,3]))),Z=e.lazy(()=>h(()=>import("./ListadoProductos-e8IxheEC.js"),__vite__mapDeps([6,1,2,3,7,8,9]))),$=e.lazy(()=>h(()=>import("./TituloNegocio-zuHTtuPb.js"),__vite__mapDeps([10,1]))),q=e.lazy(()=>h(()=>import("./Descripcion-I1Adf-fg.js"),__vite__mapDeps([11,1,2,3,8,12,13]))),G=e.lazy(()=>h(()=>import("./portadaNegocio-2WZvr9kq.js"),__vite__mapDeps([14,1,2,3,15])));function nt(){const i=A(a=>a.setWhatsapp),u=O(),[t,p]=e.useState(null),[n,d]=e.useState([]),[f,g]=e.useState([]),[b,j]=e.useState(null),[tt,w]=e.useState(!1),[v,m]=e.useState(0),[E,y]=e.useState(!1),_=e.useRef(0),r=F(a=>a.user),[et,P]=e.useState(0);e.useEffect(()=>{},[b]);const[C,st]=T({triggerOnce:!1});e.useEffect(()=>{window.scrollTo(0,0)},[]),e.useEffect(()=>{const a=u.split("/");(async()=>{const o=await U(a[2]);p(o),i(o.whatsapp)})()},[u]),e.useEffect(()=>{const a=async()=>{if(t!=null&&(t!=null&&t.id)){const l=await K(t.id);d(l!==null?l:[])}},c=async()=>{const l=await W(r.id,t.id);m(l)},o=async()=>{if(r!==null&&r.id!==null&&t!==null&&t.id!==null){const l=await H(r.id,t.id);y(l)}};a(),r!==null&&t!==null&&t!==void 0&&c(),o()},[t,r]),e.useEffect(()=>{t&&(async()=>{const c=await M(t.id);_.current=c,P(o=>o+1)})()},[t]),e.useEffect(()=>{(async()=>{if(n.length>0){const c=await J(n,!0),o=n.filter(l=>c.some(V=>V.category===l.id));d(o),g(c!==null?c:[]),o.length>0&&w(!0)}})()},[n.length]);const L=a=>{j(a)};return t!==null?s.jsx("div",{className:"container flex z-40 w-full h-auto items-center justify-center data-[menu-open=true]:border-none top-0 inset-x-0  backdrop-blur-lg data-[menu-open=true]:backdrop-blur-xl backdrop-saturate-150 bg-background/70",children:s.jsxs("section",{style:x,children:[s.jsxs("section",{className:"section",style:x,children:[s.jsx(G,{imagenPortada:t.front_pic}),s.jsxs("div",{className:"p-2 m-2",children:[s.jsxs("div",{children:[s.jsx($,{title:t.name}),r!==null?s.jsx(S,{rate:v,setRate:m,w:100,user:r.id,bussiness:t.id}):s.jsx(k,{to:"/login",children:s.jsx(S,{readOnly:!0,w:100})}),s.jsx("br",{}),s.jsx(z,{color:"secondary",style:{color:"white"},children:t.category}),s.jsx(q,{descripcion:t.description,contact:"si",suscrito:E,setIsSub:y,userId:r==null?void 0:r.id,bussinessId:t==null?void 0:t.id,localizacion:t.address,gps_location:t.gps_location,delivery:t.delivery,like:"si",url:u,bussiness:t}),s.jsx(Y,{seguidores:_.current,productos:f.length})]}),s.jsx("div",{ref:C,children:n.map((a,c)=>{const o=f.filter(l=>l.category===a.id);return o.length>0&&s.jsx(Z,{id:a.id,title:a.category,nombre:a.category,localizacion:a.category,lista:o,onChangeTitle:L,url:u},c)})})]})]}),s.jsx("div",{children:s.jsx(X,{idNegocio:t.id,title:t.name,imagen:t.perfil_pic,url:u})})]})}):s.jsx(B,{})}export{nt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/FooterNegocio-Al_cBZCj.js","assets/vendor-TeGnUX-f.js","assets/index-IetW687g.js","assets/index-aTiC4Opb.css","assets/QRCodeLogo--tXvbi8I.js","assets/Promo-AVZZRvdU.js","assets/ListadoProductos-e8IxheEC.js","assets/Like-nEWzJjjA.js","assets/ShareLink-XSi4dZWe.js","assets/ListadoProductos-umVO4ggP.css","assets/TituloNegocio-zuHTtuPb.js","assets/Descripcion-I1Adf-fg.js","assets/Telefono-69P38AWn.js","assets/Descripcion-u_0K1okz.css","assets/portadaNegocio-2WZvr9kq.js","assets/portadaNegocio-_V8fHLyB.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
